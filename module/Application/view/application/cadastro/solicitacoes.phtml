<?php

use Application\Controller\Helper\Constantes;

$html .= $this->templateFormularioTopo($this->titulo);
$html .= '<div class="panel-body bg-light">';
if ($this->solicitacoes) {
    $html .= '<table class="table">';

    $html .= '<thead>';

    $html .= '<tr>';
    $html .= '<th>Tipo</th>';
    $html .= '<th>Solicitado em</th>';
    $html .= '<th>Por</th>';
    $html .= '<th>O que ou quem?</th>';
    $html .= '<th>Para</th>';
    $html .= '<th>Status</th>';
    $html .= '</tr>';

    $html .= '</thead>';

    $html .= '<tbody>';

    foreach ($this->solicitacoes as $solicitacao) {
        $html .= '<tr>';
        $html .= '<td>' . $solicitacao->getSolicitacaoTipo()->getNome() . '</td>';
        $html .= '<td>' . $solicitacao->getData_criacaoStringPadraoBrasil() . '</td>';
        $html .= '<td>' . $solicitacao->getPessoa()->getNomePrimeiroUltimo() . '</td>';
        $html .= '<td>' . $solicitacao->getObjeto1() . '</td>';
        $html .= '<td>' . $solicitacao->getObjeto2() . '</td>';
        if ($solicitacao->getSolicitacaoSituacaoAtiva()) {
            $html .= '<td>' . $solicitacao->getSolicitacaoSituacaoAtiva()->getSituacao()->getNome() . '</td>';
        }
        $html .= '</tr>';
    }

    $html .= '</tbody>';

    $html .= '</table>';
} else {
    $html .= '<div class="alert alert-warning"><i class="fa fa-warning pr10" aria-hidden="true"></i>&nbsp;Sem solicitações!</div>';
}
$html .= '</div>';

$html .= '<div class="panel-footer text-right">';
$stringNomeDaFuncaoOnClickCadastro = 'funcaoCircuito("cadastroSolicitacao", 0)';
$html .= $this->botaoLink($this->translate(Constantes::$TRADUCAO_CADASTRAR), Constantes::$STRING_HASHTAG, 0, $this->funcaoOnClick($stringNomeDaFuncaoOnClickCadastro));
$html .= '</div>';

$html .= $this->templateFormularioRodape();
echo $html;

