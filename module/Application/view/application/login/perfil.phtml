<?php

use Application\Controller\Helper\Constantes;
use Application\Model\Helper\FuncoesEntidade;

$pessoa = $this->pessoa;
$imagem = FuncoesEntidade::nomeDaImagem($pessoa);
$tituloDaPagina = 'Meu Perfil';
$html .= $this->templateFormularioTopo($tituloDaPagina);

$formulario = $this->formulario;
$formulario->prepare();
$formulario->setAttribute(Constantes::$ACTION, $this->url(Constantes::$ROUTE_LOGIN, array(Constantes::$ACTION => 'SalvarPerfil')));

$html .= $this->form()->openTag($formulario);
$html .= '<div class="panel-body bg-light p25 mt30">';

$html .= '<div class="row">';
$html .= '<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center">';
$html .= FuncoesEntidade::tagImgComFotoDaPessoa($pessoa, 512);
$html .= '<div id="fotoCrop" class="img-container pv10 hidden">';
$html .= '<img src="/img/fotos/' . $imagem . '">';
$html .= '</div>';
$html .= '</div>';
$html .= '</div>';

$html .= '<div class="row">';
$html .= '<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center">';
$html .= '<div class="btn-group">            ';
$html .= '<label class="btn btn-primary btn-sm btn-upload" style="width: 200px;" for="inputImage" title="Upload image file">';
$html .= '<input class="sr-only" id="inputImage" name="file" type="file" accept="image/*">';
$html .= '<span class="docs-tooltip" data-toggle="tooltip" title="Import image with Blob URLs">';
$html .= 'Subir Foto <span class="fa fa-upload"></span>';
$html .= '</span>';
$html .= '</label>';
$html .= '</div>';
$html .= '</div>';
$html .= '</div>';

$html .= '<div class="row mt10 mb10">';
$html .= '<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center">';
$html .= '<button class="btn btn-primary btn-sm" style="width: 200px;" data-method="getCroppedCanvas" type="button">';
$html .= '<span class="docs-tooltip" data-toggle="tooltip" title="Salvar Foto">';
$html .= 'Salvar Foto <span class="fa fa-save"></span>';
$html .= '</span>';
$html .= '</button>';
$html .= '</div>';
$html .= '</div>';

$html .= $this->inputFormularioSimples(Constantes::$TRADUCAO_NOME, $formulario->get(Constantes::$INPUT_NOME), 12);
$html .= $this->inputFormularioSimples(Constantes::$TRADUCAO_DDD, $formulario->get(Constantes::$INPUT_DDD), 3);
$html .= $this->inputFormularioSimples(Constantes::$TRADUCAO_TELEFONE, $formulario->get(Constantes::$INPUT_TELEFONE), 9);
$html .= $this->inputFormularioSimples(Constantes::$TRADUCAO_CPF, $formulario->get(Constantes::$INPUT_CPF), 12);
$html .= $this->inputFormularioSimples(Constantes::$TRADUCAO_EMAIL, $formulario->get(Constantes::$INPUT_EMAIL), 12);

$html .= '</div>';

$html .= '<div class="panel-footer text-right">';
$html .= $this->formHidden($formulario->get(Constantes::$FORM_ID));
$html .= $this->formHidden($formulario->get(Constantes::$INPUT_CSRF));
$funcaoVerificarPerfil = $this->funcaoOnClick('');
$html .= $this->botaoLink($this->translate('Salvar Dados'), Constantes::$STRING_HASHTAG, 1, $funcaoVerificarPerfil);
$html .= '</div>';

$html .= $this->form()->closeTag();

$html .= $this->templateFormularioRodape();
echo $html;
