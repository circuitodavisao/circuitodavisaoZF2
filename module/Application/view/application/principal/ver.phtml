<?php

use Application\Controller\Helper\Constantes;
use Application\Form\PerfilForm;
use Application\Model\Entity\EntidadeTipo;
use Application\View\Helper\BotaoSimples;

echo '<div class="panel panel-primary mw1000 center-block mt40">';
echo '<div class="panel-heading">';
echo 'Perfil';
echo '</div>';
echo '<div class="panel-body">';
foreach ($this->responsabilidades as $responsavel) {
    $pessoa = $responsavel->getPessoa();
    $formulario = new PerfilForm('formulario', $pessoa);
    echo '<div class="admin-form col-xs-12 col-sm-12 col-md-6 col-lg-6">';
    echo $this->perfil($pessoa, $formulario, $naoMostrarOpcoes = false);
    echo '</div>';
}
echo '</div>';
echo '</div>';

echo '<div class="panel panel-info mw1000 center-block">';
echo '<div class="panel-heading">';
echo 'C&eacute;lula(s)';
echo '</div>';
echo '<div class="panel-body">';
echo $this->listagemDeEventos('', $this->eventos);
echo'</div>';
echo'</div>';

echo '<div class="panel panel-danger mw1000 center-block">';
echo '<div class="panel-heading">';
echo 'Inativar';
echo '</div>';
echo '<div class="panel-body">';
if ($this->tenhoDiscipulosAtivos) {
    echo '<div class="alert alert-warning mt10">Tenho discipulos nao posso inativar!</div>';
} else {
    echo '<div class="panel mt10">';
    echo '<div class="panel-body">';

    if ($this->idEntidadeTipo === EntidadeTipo::equipe || $this->idEntidadeTipo === EntidadeTipo::igreja) {
        $extraBotaoInativar = 'onclick="funcaoCircuito(\'principalGrupoExclusao\', ' . $this->idGrupo . ');"';
        echo $this->botaoSimples(
                'Inativar', $extraBotaoInativar, BotaoSimples::botaoPerigoso, BotaoSimples::posicaoAEsquerda);
    }
    if ($this->mostrarParaReenviarEmails) {
        foreach ($this->responsabilidades as $grupoResponsavel) {
            echo Constantes::$NBSP;
            $pessoa = $grupoResponsavel->getPessoa();
            if ($pessoa->getToken()) {
                $nome = $pessoa->getNomePrimeiro();
                $extraBotaoEmail = $this->funcaoOnClick('funcaoCircuito("principalNovoEmailParaEnviar", ' . $pessoa->getId() . ')');

                $labelBotao = 'Reenviar Email de acesso: ' . $nome;
                echo $this->botaoSimples(
                        $labelBotao, $extraBotaoEmail, BotaoSimples::botaoMenorImportancia, BotaoSimples::posicaoAEsquerda);
            }
        }
    }
    echo '</div>';
    echo '</div>';
}
echo '</div>'; // fim panel-body

