<?php

use Application\Controller\Helper\Constantes;
use Application\Form\PerfilForm;
use Application\Model\Entity\EntidadeTipo;
use Application\View\Helper\BotaoSimples;

echo '<div class="panel panel-primary mw1000 center-block mt50">';
echo '<div class="panel-heading">';
echo 'Perfil';
echo '</div>';
echo '<div class="panel-body">';
$tamangoMdELg = 12;
if (count($this->responsabilidades) == 2) {
    $tamangoMdELg = 6;
}
foreach ($this->responsabilidades as $responsavel) {
    $pessoa = $responsavel->getPessoa();
    $formulario = new PerfilForm('formulario', $pessoa);
    echo '<div class="admin-form col-xs-12 col-sm-12 col-md-' . $tamangoMdELg . ' col-lg-' . $tamangoMdELg . '">';
    echo $this->perfil($pessoa, $formulario, $naoMostrarOpcoes = false);
    echo '</div>';
}
echo '</div>';
echo '</div>';

echo '<div class="panel panel-danger mw1000 center-block">';
echo '<div class="panel-heading">';
echo 'Reenviar Email de acesso';
echo '</div>';
echo '<div class="panel-body">';

if ($this->mostrarParaReenviarEmails) {
    foreach ($this->responsabilidades as $grupoResponsavel) {
        echo Constantes::$NBSP;
        $pessoa = $grupoResponsavel->getPessoa();
        if ($pessoa->getToken()) {
            $nome = $pessoa->getNomePrimeiro();
            $extraBotaoEmail = $this->funcaoOnClick('funcaoCircuito("principalNovoEmailParaEnviar", ' . $pessoa->getId() . ')');
            $labelBotao = 'Reenviar para: ' . $nome;
            echo $this->botaoSimples(
                    $labelBotao, $extraBotaoEmail, BotaoSimples::botaoMenorImportancia, BotaoSimples::posicaoAEsquerda);
        }
    }
}

echo '</div>';
echo '</div>';

echo '<div class="panel panel-info mw1000 center-block">';
echo '<div class="panel-heading">';
echo 'C&eacute;lula(s)';
echo '</div>';
echo '<div class="panel-body">';
echo $this->listagemDeEventos('', $this->eventos);
echo '</div>';
echo '</div>';

if ($this->entidade->getEntidadeTipo()->getId() === EntidadeTipo::subEquipe) {
    $extraAlterarNumeracao = $this->funcaoOnClick('mostrarSplash(); funcaoCircuito("principalNumeracao", ' . $this->idGrupo . ')');
    $botaoAlterarNumeracao = $this->botaoSimples('Alterar Numeração', $extraAlterarNumeracao, BotaoSimples::botaoImportante, BotaoSimples::posicaoAEsquerda);
    echo '<div class="panel panel-system mw1000 center-block">';
    echo '<div class="panel-heading">';
    echo 'Igreja/Equipe/Sub';
    echo '</div>';
    echo '<div class="panel-body">';
    echo '<div class="col-lg-6 col-md-6 col-sm-6">' . $this->entidade->infoEntidade() . '</div>';
    echo '<div class="col-lg-6 col-md-6 col-sm-6">' . $botaoAlterarNumeracao . '</div>';
    echo '</div>';
    echo '</div>';
}